---
title: "Account"
description: "Endpoints for retrieving user information, balance, notifications, and affiliate tracking"
---

## Get User Information

<Card title="GET /user/infos" icon="user">
  Retrieves comprehensive user profile information. Admin users can query other users by providing a user ID.
</Card>

```
GET /user/infos
GET /user/infos/{userid}   (admin)
```

**Authentication:** `connected` (admin for other users)

**Response**

```json
{
  "status": "success",
  "data": {
    "informations": {
      "steamId": "76561198000000000",
      "balance": 15000,
      "skrill": "",
      "tradeurl": "https://steamcommunity.com/tradeoffer/new/?partner=...",
      "since": 1609459200,
      "image": "https://avatars.steamstatic.com/...",
      "2fa": "true",
      "name": "PlayerName",
      "lastactivity": 1706745600,
      "discordtag": "Player#1234",
      "discord": "123456789",
      "shorturl": "player",
      "message": 0,
      "notification": 1
    }
  }
}
```

### User Object

| Field | Type | Description |
|-------|------|-------------|
| `steamId` | string | User's Steam 64-bit ID |
| `balance` | integer | Account balance in cents |
| `skrill` | string | Skrill email (if configured) |
| `tradeurl` | string | Steam trade URL |
| `since` | integer | Account creation timestamp |
| `image` | string | Steam avatar URL |
| `2fa` | string | `"true"` if 2FA is enabled, `"false"` otherwise |
| `name` | string | Display name |
| `lastactivity` | integer | Last activity timestamp |
| `discordtag` | string | Discord tag |
| `discord` | string | Discord user ID |
| `shorturl` | string | Custom profile short URL |
| `message` | integer | Unread message count |
| `notification` | integer | Email notification preference (1 = enabled) |

---

## Get Balance

<Card title="GET /user/balance" icon="wallet">
  Retrieves only the user's current balance. Admin users can query other users.
</Card>

```
GET /user/balance
GET /user/balance/{userid}   (admin)
```

**Authentication:** `connected` (admin for other users)

**Response**

```json
{
  "status": "success",
  "data": {
    "balance": 15000
  }
}
```

<ResponseField name="data.balance" type="integer">
  The user's balance in cents. Divide by 100 to get the dollar amount.
</ResponseField>

---

## Get Sales Info

<Card title="GET /user/getSalesInfos" icon="chart-line">
  Retrieves summary information about the user's items currently on sale.
</Card>

```
GET /user/getSalesInfos
GET /user/getSalesInfos/{userid}   (admin)
```

**Authentication:** `connected` (admin for other users)

**Response**

```json
{
  "status": "success",
  "data": {
    "informations": {
      "nb": 42,
      "price": 125000,
      "user": "76561198000000000"
    }
  }
}
```

| Field | Type | Description |
|-------|------|-------------|
| `nb` | integer | Number of items currently on sale |
| `price` | integer | Total value of items on sale (in cents) |
| `user` | string | Steam ID of the user |

---

## Get Sales Chart Info

<Card title="GET /user/getSalesChartInfos" icon="chart-area">
  Retrieves sales statistics and graph data for a specified period.
</Card>

```
GET /user/getSalesChartInfos
GET /user/getSalesChartInfos/{userid}   (admin)
```

**Authentication:** `connected` (admin for other users)

**Query Parameters**

<ParamField query="period" type="string" default="1M">
  Time period for the chart. Values: `1W` (week), `1M` (month), `1Y` (year), `All`.
</ParamField>

<ParamField query="chart_only" type="boolean">
  If present, returns only graph data without summary statistics.
</ParamField>

**Response (full)**

```json
{
  "status": "success",
  "data": {
    "informations": {
      "week": 5000,
      "month": 25000,
      "global": 150000,
      "previousWeek": 4500,
      "previousMonth": 22000,
      "currentYear": 80000,
      "graph": [
        { "date": "2025-01-01", "buy": 1000, "sale": 2000 }
      ]
    }
  }
}
```

**Response (chart_only)**

```json
{
  "status": "success",
  "data": {
    "informations": {
      "graph": [
        { "date": "2025-01-01", "buy": 1000, "sale": 2000 }
      ]
    }
  }
}
```

---

## Get Notifications

<Card title="GET /user/notifications" icon="bell">
  Retrieves the count of unread notifications and payment reviews.
</Card>

```
GET /user/notifications
```

**Authentication:** `connected`

**Response**

```json
{
  "status": "success",
  "data": {
    "count": 3,
    "paymentReviews": 1
  }
}
```

| Field | Type | Description |
|-------|------|-------------|
| `count` | integer | Number of unread payment alerts |
| `paymentReviews` | integer | Number of unread payment reviews |

---

## Close Payment Alert

<Card title="POST /user/closePaymentAlert" icon="xmark">
  Marks a specific payment alert as read/closed.
</Card>

```
POST /user/closePaymentAlert
```

**Authentication:** `connected`

**Body Parameters**

<ParamField body="id" type="string" required>
  The ID of the payment alert to close.
</ParamField>

**Response**

```json
{
  "status": "success",
  "data": {
    "message": "Alert closed successfully"
  }
}
```

---

## Close Payment Reviews

<Card title="POST /user/closePaymentReviews" icon="check-double">
  Marks all payment reviews as read for the current user.
</Card>

```
POST /user/closePaymentReviews
```

**Authentication:** `connected`

**Response**

```json
{
  "status": "success",
  "data": {
    "message": "Payment reviews marked as read successfully"
  }
}
```

---

## Get Contact Email

<Card title="GET /user/getContactMail" icon="envelope">
  Retrieves the user's contact email address.
</Card>

```
GET /user/getContactMail
GET /user/getContactMail/{userid}   (admin)
```

**Authentication:** `connected` (admin for other users)

**Response**

```json
{
  "status": "success",
  "data": {
    "address": "user@example.com"
  }
}
```

---

## Generate CSV Token

<Card title="GET /user/generateCSVToken" icon="file-csv">
  Generates a SHA-512 token for CSV export authentication.
</Card>

```
GET /user/generateCSVToken
GET /user/generateCSVToken/{userid}   (admin)
```

**Authentication:** `connected` (admin for other users)

**Response**

```json
{
  "status": "success",
  "data": {
    "token": "a1b2c3d4e5f6..."
  }
}
```

---

## Set Affiliates

<Card title="POST /user/setAffiliates" icon="handshake">
  Registers an affiliate click via Tapfiliate. Works for both connected and anonymous users.
</Card>

```
POST /user/setAffiliates
```

**Authentication:** None

**Body Parameters**

<ParamField body="ref" type="string" required>
  The referral code from the affiliate link.
</ParamField>

**Response**

```json
{
  "status": "success",
  "data": {
    "affiliate_id": "click_abc123"
  }
}
```

---

## Get User Buy Order for Item

<Card title="GET /user/buyorder/:item" icon="cart-shopping">
  Retrieves the current user's buy order for a specific item.
</Card>

```
GET /user/buyorder/{item}
```

**Authentication:** `connected`

**Path Parameters**

<ParamField path="item" type="integer" required>
  The item ID to check buy order for.
</ParamField>

**Response**

```json
{
  "status": "success",
  "data": {
    "informations": {
      "id": 1234,
      "user": "76561198000000000",
      "item_id": 5678,
      "amount": 5,
      "value": 1500
    }
  }
}
```
